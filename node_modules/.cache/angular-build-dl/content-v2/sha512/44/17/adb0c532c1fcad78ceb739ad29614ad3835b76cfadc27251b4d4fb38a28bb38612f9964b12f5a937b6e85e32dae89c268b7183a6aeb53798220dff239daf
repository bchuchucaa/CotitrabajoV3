{"version":3,"sources":["webpack:///src/app/components/crear-obra/crear-obra.page.html","webpack:///src/app/components/take-photo/take-photo.component.html","webpack:///src/app/components/crear-obra/crear-obra-routing.module.ts","webpack:///src/app/components/crear-obra/crear-obra.module.ts","webpack:///src/app/components/crear-obra/crear-obra.page.scss","webpack:///src/app/components/crear-obra/crear-obra.page.ts","webpack:///src/app/components/take-photo/take-photo.component.scss","webpack:///src/app/components/take-photo/take-photo.component.ts"],"names":["routes","path","component","CrearObraPageRoutingModule","imports","forChild","exports","CrearObraPageModule","declarations","CrearObraPage","camera","storage","database","route","router","obraService","notificacionesService","obra","uidCliente","snapshot","paramMap","get","console","log","isUploaded","isUploading","imageCollection","collection","images","valueChanges","codigocliente","image","saveObra","navigationExtras","queryParams","notificacionToast","url","navigate","error","event","file","item","type","split","fileName","name","Date","getTime","customMetadata","app","fileRef","ref","task","upload","percentaje","percentageChanges","snapshotChanges","pipe","UploadedFileURL","getDownloadURL","subscribe","resp","addImagetoDB","filepath","size","fileSize","snap","totalBytes","id","createId","doc","set","then","options","quality","destinationType","DestinationType","FILE_URI","encodingType","EncodingType","JPEG","mediaType","MediaType","PICTURE","getPicture","imageData","base64Image","err","data","imgData","selector","template","TakePhotoComponent","loadingCtrl","source","imageSelected","uploadFinished","DATA_URL","sourceType","PictureSourceType","CAMERA","startUpload","PHOTOLIBRARY","emit","byteCharacters","atob","Number","length","putString","create","message","loading","present","val","complete","setTimeout","dismiss","downloadURL","JSON","stringify","sizeInBytes","units","power","Math","round","min","pow","formattedSize","unit"],"mappings":"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","file":"components-crear-obra-crear-obra-module-es5.js","sourcesContent":["export default \"<!-- Large title -->\\n<ion-header [translucent]=\\\"true\\\">\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-menu-button></ion-menu-button>\\n        </ion-buttons>\\n\\n        <ion-title> PUBLICAR OBRA</ion-title>\\n        <ion-avatar slot=\\\"start\\\">\\n            <img src=\\\"assets/icon/iconlogo.png\\\" alt=\\\" Ionic logo \\\">\\n        </ion-avatar>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<!--<ion-button (click)=\\\"tomarFoto() \\\" color=\\\" success \\\">Fotografia</ion-button>-->\\n\\n\\n<ion-content>\\n\\n    <ion-card>\\n        <div class=\\\"login-logo \\\">\\n            <img src=\\\"assets/img/publica.jpg \\\" alt=\\\"Ionic logo \\\">\\n        </div>\\n        <ion-card-header>Datos de tu obra</ion-card-header>\\n        <ion-item>\\n            <ion-input placeholder=\\\"Ingresa un titulo \\\" [(ngModel)]=\\\"obra.titulo \\\">Titulo: </ion-input>\\n        </ion-item>\\n        <ion-item>\\n            <ion-textarea placeholder=\\\"Ingresa una descripcion de tu obra \\\" [(ngModel)]=\\\"obra.descripcion \\\">Descipcion: </ion-textarea>\\n        </ion-item>\\n        <ion-item>\\n            <ion-label>Selecciona una categoria</ion-label>\\n            <ion-select class=\\\"custom-options \\\" [(ngModel)]=\\\"obra.categoria \\\">\\n                <ion-select-option value=\\\"CARPINTERIA \\\">CARPINTERIA</ion-select-option>\\n                <ion-select-option value=\\\"INDUSTRIAL \\\">INDUSTRIAL</ion-select-option>\\n                <ion-select-option value=\\\"PLOMERIA \\\">PLOMERIA</ion-select-option>\\n                <ion-select-option value=\\\"ARQUITECTURA \\\">ARQUITECTURA</ion-select-option>\\n            </ion-select>\\n\\n\\n\\n        </ion-item>\\n        <ion-item>\\n            <ion-label>Sube una fotografia</ion-label>\\n            <app-take-photo [source]=\\\" 'gallery' \\\" (imageSelected)=\\\"imageSeleccionada($event) \\\" (uploadFinished)=\\\"uploadFinished($event) \\\"></app-take-photo>\\n\\n        </ion-item>\\n    </ion-card>\\n    <!--<app-take-photo [source]=\\\" 'photo' \\\" (imageSelected)=\\\"imageSeleccionada($event) \\\" (uploadFinished)=\\\"uploadFinished($event) \\\"></app-take-photo>\\n    -->\\n\\n    <ion-card *ngIf=\\\"obra.image \\\">\\n        <ion-img [src]=\\\"imgData \\\"></ion-img>\\n        <ion-img [src]=\\\"obra.image?.url \\\"></ion-img>\\n    </ion-card>\\n\\n    <ion-card *ngIf=\\\"obra.image==null \\\">\\n        <ion-label>Todavia no has seleccionado una imagen</ion-label>\\n    </ion-card>\\n    <div style=\\\"margin: 5%;margin-left: 20%; \\\">\\n        <ion-button (click)=\\\"guardarObra() \\\" color=\\\"success \\\">Publicar\\n            <ion-icon name=\\\"checkmark-done-circle-outline \\\"></ion-icon>\\n        </ion-button>\\n        <ion-button color=\\\"danger \\\">Cancelar\\n            <ion-icon name=\\\"trash-outline \\\"></ion-icon>\\n        </ion-button>\\n    </div>\\n\\n</ion-content>\";","export default \"<ion-button color=\\\"dark\\\" (click)=\\\"tomarFoto()\\\" *ngIf=\\\"source=='photo'\\\">\\n    <ion-icon name=\\\"camera-outline\\\"></ion-icon> Fotografia\\n</ion-button>\\n<ion-button color=\\\"dark\\\" icon=\\\"image-outline\\\" (click)=\\\"recuperarImgagen()\\\" *ngIf=\\\"source!=='photo'\\\">\\n    <ion-icon name=\\\"image-outline\\\"></ion-icon> Galeria\\n</ion-button>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CrearObraPage } from './crear-obra.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CrearObraPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CrearObraPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { TakePhotoComponent } from '../take-photo/take-photo.component';\n\nimport { CrearObraPageRoutingModule } from './crear-obra-routing.module';\n\nimport { CrearObraPage } from './crear-obra.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CrearObraPageRoutingModule\n  ],\n  declarations: [CrearObraPage,TakePhotoComponent]\n})\nexport class CrearObraPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvY3JlYXItb2JyYS9jcmVhci1vYnJhLnBhZ2Uuc2NzcyJ9 */\";","import { Component, OnInit } from '@angular/core';\nimport { Obra } from '../../model/obra';\nimport { ActivatedRoute, NavigationExtras, Router } from '@angular/router';\nimport { ObrasService } from '../../services/obras.service';\nimport { NotificacionesService } from '../../services/notificaciones.service';\n//IMPORT TO UPLOAD IMAGES BY SCORPION\nimport { AngularFirestore, AngularFirestoreCollection } from '@angular/fire/firestore';\nimport { AngularFireStorage, AngularFireUploadTask } from '@angular/fire/storage';\nimport { Observable } from 'rxjs';\nimport { finalize, tap } from 'rxjs/operators';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nexport interface MyData {\n  name: string;\n  filepath: string;\n  size: number;\n}\n\n\n\n@Component({\n  selector: 'app-crear-obra',\n  templateUrl: './crear-obra.page.html',\n  styleUrls: ['./crear-obra.page.scss'],\n})\nexport class CrearObraPage implements OnInit {\n  task: AngularFireUploadTask;\n  percentaje: Observable<number>;\n  snapshot: Observable<any>;\n  UploadedFileURL: Observable<string>;\n  images: Observable<MyData[]>;\n  fileName:string;\n  fileSize:number;\n  isUploading:boolean;\n  isUploaded:boolean;\n\n  imgData: string;\n  imgURL: string;\n\n\n  private imageCollection: AngularFirestoreCollection<MyData>;\n\n  uidCliente:string;\n  idImgObra:string;\n\n  obra :Obra =new Obra();\n  constructor(private camera:Camera,private storage:AngularFireStorage,private database:AngularFirestore, private route: ActivatedRoute, private router: Router,public obraService:ObrasService,public notificacionesService: NotificacionesService) { \n    this.uidCliente = this.route.snapshot.paramMap.get('uid');\n    console.log(\"consultando \", this.uidCliente);\n    obraService:ObrasService;\n    this.isUploaded=false;\n    this.isUploading=false;\n    this.imageCollection = database.collection<MyData>('freakyImages');\n    this.images = this.imageCollection.valueChanges();\n\n  }\n\n  ngOnInit() {\n  }\n\n  guardarObra(){\n    console.log(this.uidCliente);\n  \n    try{\n      this.obra.codigocliente=this.uidCliente;\n      console.log(this.obra.image);\n      this.obraService.saveObra(this.obra);\n      let navigationExtras: NavigationExtras ={\n        queryParams:{\n          obra: this.obra,\n        }\n      };\n      this.notificacionesService.notificacionToast(\"Tu obra se creo correctamente..!  :)\");\n      const url='/view-cliente/'+this.uidCliente;\n      console.log('Sending this route '+url);\n      this.router.navigate([url]);\n    }catch(error){\n      console.error(\"Error tratando de guardar la obra\", error);\n      throw error;\n    \n    }\n  }\n  subirImagen(event:FileList)\n  {\n    const file= event.item(0);\n    if (file.type.split('/')[0]!=='image'){\n      console.log(\"Error formato desconocido :(\")\n      return;\n    }\n    this.isUploading=true;\n    this.isUploaded=false;\n    this.fileName=file.name;\n    const path =`freakyStorage/${new Date().getTime()}_${file.name}`;\n    const customMetadata = {app:'Freaky Image Upload Demo'};\n    const fileRef= this.storage.ref(path);\n    console.log(path);\n    this.task = this.storage.upload(path,file,{customMetadata});\n    console.log(path,file,{customMetadata});\n    this.percentaje = this.task.percentageChanges();\n    this.snapshot=  this.task.snapshotChanges().pipe(\n      finalize(() => {\n        this.UploadedFileURL = fileRef.getDownloadURL();\n        console.log(\"ruta imagen subir \"+this.UploadedFileURL);\n        this.UploadedFileURL.subscribe(resp=>{\n          this.addImagetoDB({\n            name:file.name,\n            filepath:resp,\n            size:this.fileSize,        \n           \n\n          });\n          this.isUploading=false;\n          this.isUploaded =true;\n\n        },error =>{\n          console.error(error);\n        })\n      }),\n      tap(snap=>{\n        this.fileSize = snap.totalBytes;\n      })\n    )\n\n  }\n\n  addImagetoDB(image: MyData) {\n    //Create an ID for document\n    const id = this.database.createId();\n  \n    //Set document id with value in database\n    this.imageCollection.doc(id).set(image).then(resp => {\n      console.log(resp);\n    }).catch(error => {\n      console.log(\"error \" + error);\n    });\n  }\n  tomarFoto(){\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.FILE_URI,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE\n    }\n    \n    this.camera.getPicture(options).then((imageData) => {\n     // imageData is either a base64 encoded string or a file URI\n     // If it's base64 (DATA_URL):\n     let base64Image = 'data:image/jpeg;base64,' + imageData;\n     console.log(base64Image);\n    }, (err) => {\n     // Handle error\n    });\n  }\n  imageSeleccionada(data){\n    console.log(\"subiendo data imagen\");\n    console.log(data);\n    this.imgData = data;\n  }\n\n  uploadFinished(data){\n    console.log(\"upload finished\");\n    this.obra.image = data;\n    console.log(this.obra.image);\n    console.log(\"-----------------\");\n  }\n\n  \n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHMvdGFrZS1waG90by90YWtlLXBob3RvLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, Input, OnInit, Output } from '@angular/core';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { EventEmitter } from '@angular/core'\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { LoadingController } from '@ionic/angular';\nimport { filter, finalize, tap } from 'rxjs/operators'\n\n\n@Component({\n  selector: 'app-take-photo',\n  templateUrl: './take-photo.component.html',\n  styleUrls: ['./take-photo.component.scss'],\n})\nexport class TakePhotoComponent implements OnInit {\n\n  @Input() source: string = 'photo';   //posibilidades: photo, gallery\n\n  imageData: string;\n\n  @Output() imageSelected = new EventEmitter<any>();\n  @Output() uploadFinished = new EventEmitter<any>();\n\n  constructor(private camera: Camera,\n      private storage: AngularFireStorage,\n      private loadingCtrl: LoadingController) { }\n\n  ngOnInit() {}\n\n  tomarFoto(){\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      sourceType: this.camera.PictureSourceType.CAMERA\n    }\n    \n    this.camera.getPicture(options).then((imageData) => {\n     let base64Image = 'data:image/jpeg;base64,' + imageData;\n     this.imageData = base64Image;\n     this.startUpload(imageData);\n    }, (err) => {\n     // Handle error\n    });\n  }\n\n  recuperarImgagen(){\n    const options: CameraOptions = {\n      quality: 100,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      sourceType: this.camera.PictureSourceType.PHOTOLIBRARY\n    }\n    \n    this.camera.getPicture(options).then((imageData) => {\n     let base64Image = 'data:image/jpeg;base64,' + imageData;\n     this.imageData = base64Image;\n     this.startUpload(imageData);\n     this.imageSelected.emit(base64Image);\n    }, (err) => {\n     // Handle error\n    });\n  }\n\n  async startUpload(file: string){\n    let byteCharacters = atob(file);\n    \n    const path = `images/${new Date().getTime()}.jpg`;\n   \n    let image = 'data:image/jpg;base64,'+file;\n    \n    const data = {\n      ref: path,\n      type: 'image',\n      url: null,\n      name: 'image',\n      size: this.fileSize(Number(byteCharacters.length))\n    }\n\n    try{\n      let ref = this.storage.ref(path);\n      let task = ref.putString(image, 'data_url');\n      const loading = await this.loadingCtrl.create({\n        message: 'Espere, subiendo fotografía...'\n      });  \n      await loading.present(); \n\n      //Listener de progreso de carga\n      task.percentageChanges().pipe(\n        filter(val => val === 100),\n        tap(complete => {\n          setTimeout(() => {\n            loading.dismiss();\n          }, 3500);\n        })\n      ).subscribe();\n\n      task.snapshotChanges().pipe(\n        finalize(() => {\n            let downloadURL = ref.getDownloadURL()\n            downloadURL.subscribe(url => {\n              data.url= url;\n              console.log(\"donload terminado \" + url);\n              this.uploadFinished.emit(data);\n            });\n        })\n      )\n      .subscribe();\n    }catch(error){\n      console.error(JSON.stringify(error));\n      console.error(\"error \");\n      \n    }\n    \n  }\n\n  /**\n   * Redondea un número de bytes a un tamaño legible\n   * @param sizeInBytes Número de bytes\n   */\n  fileSize(sizeInBytes: number) {\n    const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n    let power = Math.round(Math.log(sizeInBytes) / Math.log(1024));\n    power = Math.min(power, units.length - 1);\n\n    const size = sizeInBytes / Math.pow(1024, power); // size in new units\n    const formattedSize = Math.round(size * 100) / 100; // keep up to 2 decimals\n    const unit = units[power];\n\n    return size ? `${formattedSize} ${unit}` : '0';\n  }\n\n}\n"]}