{"version":3,"sources":["./src/app/localizacion/localizacion.page.html","./src/app/localizacion/localizacion-routing.module.ts","./src/app/localizacion/localizacion.module.ts","./src/app/localizacion/localizacion.page.scss","./src/app/localizacion/localizacion.page.ts","./src/app/services/location.service.ts"],"names":[],"mappings":"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","file":"localizacion-localizacion-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-title>direcciones</ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n    <h1>{{ title }}</h1>\\n\\n    <!-- this creates a google map on the page with the given lat/lng from -->\\n    <!-- the component as the initial center of the map: -->\\n    <agm-map [latitude]=\\\"lat\\\" [longitude]=\\\"lng\\\" (centerChange)=\\\"setNewLocation($event)\\\">\\n        <agm-marker [latitude]=\\\"lat\\\" [longitude]=\\\"lng\\\" [iconUrl]=\\\"'https://cdn4.iconfinder.com/data/icons/essential-app-2/16/botton-on-launch-point-48.png'\\\">\\n            <agm-info-window>UPS</agm-info-window>\\n\\n        </agm-marker>\\n\\n\\n        <agm-marker [latitude]=\\\"current.latitude\\\" [longitude]=\\\"current.longitude\\\" [iconUrl]=\\\"'https://cdn4.iconfinder.com/data/icons/essential-app-2/16/botton-on-launch-point-48.png'\\\">\\n            <agm-info-window>{{current.address}}</agm-info-window>\\n\\n        </agm-marker>\\n\\n        <agm-marker [latitude]=\\\"newLocation.latitude\\\" [longitude]=\\\"newLocation.longitude\\\" [iconUrl]=\\\"'https://cdn2.iconfinder.com/data/icons/pointers-5/24/pointer-top-left-48.png'\\\">\\n            <agm-info-window>{{newLocation.address}}</agm-info-window>\\n\\n        </agm-marker>\\n        <ion-item *ngFor=\\\"let location of localizaciones | async\\\">\\n\\n            <agm-marker [latitude]=\\\"location.latitude\\\" [longitude]=\\\"location.longitude\\\" [iconUrl]=\\\"'https://cdn4.iconfinder.com/data/icons/e-commerce-icon-set/48/Bookmark_2-48.png'\\\">\\n                <agm-info-window>{{newLocation.address}}</agm-info-window>\\n\\n            </agm-marker>\\n        </ion-item>\\n\\n\\n\\n    </agm-map>\\n\\n    {{newLocation | json}}\\n\\n\\n</ion-content>\\n<footer>\\n    <div style=\\\"margin-left: 25%;\\\">\\n        <ion-button (click)=\\\"saveLocation()\\\" color=\\\"success\\\">Guardar</ion-button>\\n        <ion-button (click)=\\\"getSavedLocations()\\\" color=\\\"danger\\\">Cancelar</ion-button>\\n    </div>\\n</footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { LocalizacionPage } from './localizacion.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LocalizacionPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LocalizacionPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { LocalizacionPageRoutingModule } from './localizacion-routing.module';\n\nimport { LocalizacionPage } from './localizacion.page';\nimport { AgmCoreModule } from '@agm/core';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    LocalizacionPageRoutingModule,\n    AgmCoreModule.forRoot({\n      apiKey: 'AIzaSyC7lREbDALML3-f6Nj0lEwoFTMuWcmZdK4'\n    })\n  ],\n  declarations: [LocalizacionPage]\n})\nexport class LocalizacionPageModule {}\n","export default \"agm-map {\\n  height: 300px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbG9jYWxpemFjaW9uL2xvY2FsaXphY2lvbi5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0FBQ0oiLCJmaWxlIjoic3JjL2FwcC9sb2NhbGl6YWNpb24vbG9jYWxpemFjaW9uLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImFnbS1tYXAge1xuICAgIGhlaWdodDogMzAwcHg7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\nimport { LocationService } from '../services/location.service';\nimport { Localizacion } from '../model/localizacion';\nimport { Query } from '@firebase/firestore-types'\nimport { Observable } from 'rxjs';\n@Component({\n  selector: 'app-localizacion',\n  templateUrl: './localizacion.page.html',\n  styleUrls: ['./localizacion.page.scss'],\n})\nexport class LocalizacionPage implements OnInit {\n\n  title = 'My first AGM project';\n  lat = 51.678418;\n  lng = 7.809007;\n\n  localizaciones:Observable<any[]>;\n  myVar:Localizacion[] = new Array();\n\n\n  current = {\n    latitude: '',\n    longitude: '',\n    address: ''\n  }\n\n  newLocation = {\n    latitude: '',\n    longitude: '',\n    address: ''\n  }\n\n  constructor(private locationService: LocationService) {\n    this.localizaciones=this.locationService.getSavedLocations();  \n  }\n\n  async ngOnInit() {\n\n    this.current = await this.locationService.getCurrentLocation();\n    this.locationService.getAddressOfLocation(this.newLocation);\n    //this.localizaciones.forEach(q => this.locationService.getAddressOfLocation(q));\n  }\n  //IS DEPRECATED BY SCORPION\n  getSavedLocations(){\n    this.locationService.getSavedLocations().subscribe(data =>{\n     console.log(data)\n      const aux:any=data;\n      this.locationService.getAddressOfLocation(aux[0]);\n      \n    });\n  \n  }\n\n  setNewLocation(event) {\n    if (event) {\n      this.newLocation.latitude = event.lat;\n      this.newLocation.longitude = event.lng;\n      this.locationService.getAddressOfLocation(this.newLocation);\n    }\n  }\n\n\n  saveLocation() {\n    console.log('enviado a guardar');\n    this.locationService.saveDireccion(this.newLocation);\n  }\n  logInFacebook(){\n    \n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Platform } from '@ionic/angular';\nimport { Localizacion } from '../model/localizacion';\nimport { AngularFirestore } from '@angular/fire/firestore';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LocationService {\n\n  constructor(private platform: Platform,public afs:AngularFirestore) { }\n\n\n  async getCurrentLocation(withAddress: boolean = true): Promise<any> {\n    let location: any = {};\n\n    return new Promise((resolve, reject) => {\n    if (navigator.geolocation) {\n      var options = {\n        frequency: 1000,\n        timeout: 15000,\n        enableHighAccuracy: true\n      };\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          location.latitude = position.coords.latitude;\n          location.longitude = position.coords.longitude;\n          if (withAddress) {\n            let geocoder = new google.maps.Geocoder();\n            let latlng = { lat: location.latitude, lng: location.longitude };\n            geocoder.geocode({ location: latlng }, (results, status) => {\n              if (results != null && results != undefined) {\n                location.address = results[0].formatted_address;\n              } //end if\n              resolve(location);\n            });\n          } else {\n            resolve(location);\n          } //end if\n        },\n        error => {\n          resolve(null);\n        },\n        options\n      );\n    } //end if\n  });\n  } \n\n  async getAddressOfLocation(location: any) {\n    let geocoder = new google.maps.Geocoder();\n    let latlng = { lat: location.latitude, lng: location.longitude };\n    geocoder.geocode({ location: latlng }, (results, status) => {\n      if (results != null) {\n        location.address = results[0].formatted_address;\n        return location.address;\n      } \n    });\n  } \n  async saveDireccion(localizacion: any){\n    console.log(localizacion.latitude)\n    console.log('Direccion a guardar');\n    console.log(localizacion.address);\n    const refObra = this.afs.collection(\"localizaciones\");\n    if(localizacion.uid==null){\n      localizacion.uid=this.afs.createId();\n    }\n    refObra.doc(localizacion.uid).set(Object.assign({},localizacion),{merge: true})\n  }\n\n\n\n\n  getSavedLocations():Observable<any>{\n    console.log('TRYING TO GET SAVED LOCATIONS');\n    return this.afs.collection(\"localizaciones\").valueChanges();\n  }\n \n\n\n}\n"],"sourceRoot":"webpack:///"}